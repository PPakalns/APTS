{% extends 'master' %}

{% block header %}
  <h1>Grupas</h1>
  <p>Grupās tās dalībniekiem ir pieeja programmēšanas uzdevumiem</p>
{% endblock %}

{% block content %}

  <h3>Manas grupas:</h3>
  {% if groups.length == 0 %}
    <p class="bg-info">
      Jūs neesat pievienots nevienā grupā.
    </p>
  {% else %}
    <table class="table">
      <thead>
        <tr>
          <th>#</td>
          <th>Nosaukums</td>
        </tr>
      </thead>
      <tbody>
        {% set i=0 %}
        {% for group in groups %}
          <tr>
            <td>
              {% set i=i+1 %}
              {{ i }}
            </td>
            <td>
              {{ linkTo('group/show', group.name, {id: group.id}) }}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
  <hr>
  {% if cUser.admin %}
    <h3>Grupu pārvaldība: Visas grupas</h3>
    {% if agroups.length == 0 %}
      <p class="bg-info">
        Neviena grupa nav izveidota.
      </p>
    {% else %}
      <table class="table">
        <thead>
          <tr>
            <th>#</td>
            <th>Nosaukums</td>
          </tr>
        </thead>
        <tbody>
          {% set i=0 %}
          {% for group in agroups %}
            <tr>
              <td>
                {% set i=i+1 %}
                {{ i }}
              </td>
              <td>
                {{ linkTo('group/show', group.name, {id: group.id}) }}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  {% endif %}
{% endblock %}

{% block sidebar %}
  {% if cUser.admin %}
    <div class="list-group">
      <a href="{{ 'problem/list' | route({}) }}" class="list-group-item  list-group-item-warning">
        <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Grupu pārvaldīšana
      </a>
      <a href="{{ 'group/create' | route({}) }}" class="list-group-item">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Izveidot grupu
      </a>
    </div>
  {% endif %}
{% endblock %}
