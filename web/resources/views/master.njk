<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.7">
    <title>APTS</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext,latin-ext,vietnamese" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/atom-one-light.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"  crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/style.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  </head>

  <body class="tex2jax_ignore">
    <div id="wrapper">
      <nav class="navbar navbar-default navbar-static-top h_green">
        <div class="container">
            <div class="navbar-header">
            <a class="navbar-brand" style="color: darkred; font-weight: bold;" href="{{ 'home' | route({}) }}">
              APTS
            </a>

          </div>

          <ul class="nav navbar-nav">
            {% if cUser.auth %}
              <li>
                <a href="{{ 'group/list' | route({}) }}">
                  {{ antl.formatMessage('messages.group') }}
                </a>
              </li>
              {% if cUser.admin %}
                <li>
                  <a href="{{ 'problem/list' | route({}) }}">
                    {{ antl.formatMessage('messages.tasks') }}
                  </a>
                </li>
                <li>
                  <a href="{{ 'PageController.index' | action({}) }}">
                    {{ antl.formatMessage('messages.pages') }}
                  </a>
                </li>
              {% endif %}
              <li>
                <a href="{{ 'SubmissionController.index' | action({}) }}">
                  {{ antl.formatMessage('messages.submissions') }}
                </a>
              </li>
            {% endif %}
            <li>
              <a href="{{ 'PageController.show' | action({id: 'FAQ'}) }}">
                {{ antl.formatMessage('messages.FAQ') }}
              </a>
            </li>
          </ul>

          <ul class="nav navbar-nav navbar-right">

            {% if cUser.auth %}
              <li style="padding-left:10px;"><a href="{{ 'UserController.show' | action({}) }}">{{ antl.formatMessage( 'messages.menu_user', { user: cUser.ruser.email } ) }}</a></li>
              <li><a href="{{ 'logout' | route({}) }}">{{ antl.formatMessage('messages.logout') }}</a></li>
            {% else %}
              <li><a href="{{ 'login' | route({}) }}">{{ antl.formatMessage('messages.login' )}}</a></li>
              <li><a href="{{ 'register' | route({}) }}">{{ antl.formatMessage('messages.register' )}}</a></li>
            {% endif %}
          </ul>
        </div>
      </nav>

      <div class="container">
        {% block path %}
        {% endblock path %}

        <div class="header">
          {% block header %}{% endblock %}
        </div>

        <div class="row">
          <div class="col-md-3 col-md-push-9 sidebar">
            <ul class="list-group">
              <li class="list-group-item text-center" id="clock-wrapper">
                <span id="clock"></span>
              </li>
            </ul>
            {% block sidebar %}
            {% endblock %}
            {% include 'submission/sidelist' %}
          </div> {# sidebar #}

          <div class="col-md-9 col-md-pull-3 content">

            {% for warning in old('warnings') %}
              <p class="bg-warning">
                {{ warning.msg if warning.msg else warning.message }}
              </p>
            {% endfor %}

            {% for info in old('infos') %}
              <p class="bg-info">
                {{ info.msg if info.msg else info.message }}
              </p>
            {% endfor %}

            {% for success in old('successes') %}
              <p class="bg-success">
                {{ success.msg if success.msg else success.message }}
              </p>
            {% endfor %}

            {% for error in old('errors') %}
              <p class="bg-danger">
                {{ error.msg if error.msg else error.message}}
              </p>
            {% endfor %}

            {% block content %}{% endblock %}
          </div>

        </div> {# .row #}
      </div> {# .container #}
    </div> {# #wrapper #}
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <p>{{ antl.formatMessage('messages.APTS') }} - {{ antl.formatMessage('messages.APTS_') }}</p>
          </div>
          <div class="col-md-5">
            <p>(c) Pēteris Pakalns</p>
          </div>
          <div class="col-md-1">
            {#<p>
              <a href="?lang=lv" aria-label="Latviešu valoda">LV</a>
              <a href="?lang=en" aria-label="English valoda">EN</a>
            </p>#}
          </div>
        </div>
      </div>
    </footer>

    <!-- JavaScript files -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        showProcessingMessages: false,
        tex2jax: { inlineMath: [['$','$'],['\\(','\\)']] },
        TeX: { equationNumbers: {autoNumber: "AMS"} }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="/marked.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();

marked.setOptions({
  renderer: new marked.Renderer(),
  gfm: true,
  tables: true,
  breaks: false,
  pedantic: false,
  sanitize: true,
  smartLists: true,
  smartypants: false
});
    </script>
<script type="text/javascript">
$(document).ready(function(){
  var serverTime = Date.parse("{{ server_time }}");
  var serverTimeOffset = {{server_time_offset}};
  var userTime = new Date();

  function Time() {
    var diff = new Date() - userTime;
    var currentTime = new Date(serverTime + diff - serverTimeOffset*60000)

    var hours = currentTime.getUTCHours();
    var minutes = currentTime.getUTCMinutes();
    var seconds = currentTime.getUTCSeconds();

    var clock = document.getElementById('clock');

    clock.innerText = ("0" + hours).slice(-2) + ":" + ("0" + minutes).slice(-2) + ":" + ("0" + seconds).slice(-2);
  }

  Time();
  setInterval(Time, 1000);
})
</script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
    {% block customscript %}{% endblock %}
  </body>
</html>
